<!-- src/app/features/auth/components/register/register.component.html  -->

<div class="register-container">
  <div class="register-card">
    <app-card>
      <!-- Header -->
      <div class="register-header">
        <h1 class="register-title">Create Account</h1>
        <p class="register-subtitle">Join us today and get started</p>
      </div>

      <!-- Error Alert -->
      <app-alert 
        *ngIf="errorMessage$ | async as error" 
        type="error"
        [dismissible]="false">
        {{ error }}
      </app-alert>

      <!-- Registration Form -->
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
        
        <!-- Name Fields (Side by Side) -->
        <div class="name-fields">
          <app-input
            label="First Name"
            type="text"
            formControlName="firstName"
            placeholder="John"
            [required]="true"
            [error]="hasError('firstName')"
            [errorMessage]="getErrorMessage('firstName')">
          </app-input>

          <app-input
            label="Last Name"
            type="text"
            formControlName="lastName"
            placeholder="Doe"
            [required]="true"
            [error]="hasError('lastName')"
            [errorMessage]="getErrorMessage('lastName')">
          </app-input>
        </div>

        <!-- Email Field -->
        <app-input
          label="Email Address"
          type="email"
          formControlName="email"
          placeholder="you@example.com"
          [required]="true"
          [error]="hasError('email')"
          [errorMessage]="getErrorMessage('email')">
        </app-input>

        <!-- Password Field -->
        <div class="password-field">
          <app-input
            label="Password"
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
            placeholder="Create a strong password"
            [required]="true"
            [error]="hasError('password')"
            [errorMessage]="getErrorMessage('password')"
            hint="Must be at least 8 characters with uppercase, lowercase, and number">
          </app-input>
          
          <button 
            type="button" 
            class="password-toggle"
            (click)="togglePasswordVisibility('password')"
            aria-label="Toggle password visibility">
            {{ showPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>

        <!-- Confirm Password Field -->
        <div class="password-field">
          <app-input
            label="Confirm Password"
            [type]="showConfirmPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
            placeholder="Re-enter your password"
            [required]="true"
            [error]="hasError('confirmPassword') || hasPasswordMismatch()"
            [errorMessage]="hasPasswordMismatch() ? 'Passwords do not match' : getErrorMessage('confirmPassword')">
          </app-input>
          
          <button 
            type="button" 
            class="password-toggle"
            (click)="togglePasswordVisibility('confirmPassword')"
            aria-label="Toggle confirm password visibility">
            {{ showConfirmPassword ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>

        <!-- Terms and Conditions -->
        <div class="terms">
          <label class="terms-checkbox">
            <input type="checkbox" required />
            <span>I agree to the <a href="#" target="_blank">Terms and Conditions</a></span>
          </label>
        </div>

        <!-- Submit Button -->
        <app-button
          type="submit"
          variant="primary"
          size="lg"
          [block]="true"
          [isLoading]="isLoading$ | async"
          [disabled]="registerForm.invalid">
          Create Account
        </app-button>

        <!-- Login Link -->
        <div class="login-link">
          <span>Already have an account?</span>
          <a routerLink="/auth/login">Sign in</a>
        </div>
      </form>
    </app-card>
  </div>

</div>
